# Security Policy

## 支持的版本

我们为以下版本提供安全更新：

| 版本 | 支持状态 |
| ------- | ------------------ |
| 1.x.x   | :white_check_mark: |
| < 1.0   | :x:                |

## 报告安全漏洞

我们非常重视安全问题。如果您发现安全漏洞，请**不要**通过公开的 Issue 报告。

### 报告渠道

请通过以下方式私密报告安全问题：

1. **优先推荐**: 使用 GitHub 的私密安全漏洞报告功能
   - 访问项目的 Security 标签页
   - 点击 "Report a vulnerability"

2. **备选方式**: 发送邮件给项目维护者
   - 在邮件主题中注明 [SECURITY]
   - 详细描述安全问题

### 报告内容

请在报告中包含以下信息：

- **漏洞类型**: 例如 XSS、CSRF、SQL注入等
- **影响范围**: 哪些版本受影响
- **复现步骤**: 详细的复现方法
- **影响评估**: 可能造成的危害
- **修复建议**: 如果有修复方案

### 示例报告

```markdown
**漏洞类型**: XSS (跨站脚本攻击)

**影响版本**: v1.0.0 - v1.2.3

**漏洞描述**:
在用户输入处理中存在 XSS 漏洞，攻击者可以注入恶意脚本。

**复现步骤**:
1. 访问 /users 页面
2. 在搜索框输入 `<script>alert('XSS')</script>`
3. 脚本被执行

**影响评估**:
- 严重程度: 高
- 可能窃取用户 cookie 和敏感信息
- 可能进行钓鱼攻击

**修复建议**:
在 src/components/SearchBox.svelte 中对用户输入进行 HTML 转义。
```

## 响应流程

### 1. 确认 (24小时内)

我们会在 24 小时内确认收到您的报告，并进行初步评估。

### 2. 评估 (3个工作日内)

我们会评估：
- 漏洞的真实性
- 影响范围和严重程度
- 修复的优先级

### 3. 修复 (根据严重程度)

- **严重漏洞**: 7 天内发布修复
- **高危漏洞**: 14 天内发布修复
- **中等漏洞**: 30 天内发布修复
- **低危漏洞**: 在下个版本中修复

### 4. 披露

修复发布后，我们会：
- 在 CHANGELOG 中说明安全修复
- 发布安全公告
- 致谢报告者（如同意）

## 安全最佳实践

### 对于使用者

1. **保持更新**
   - 及时更新到最新版本
   - 关注安全公告

2. **环境变量安全**
   - 不要在代码中硬编码敏感信息
   - 使用 .env 文件并加入 .gitignore
   - 生产环境使用环境变量

3. **API 安全**
   - 使用 HTTPS
   - 实施适当的认证和授权
   - 验证和清理所有输入

4. **依赖安全**
   ```bash
   # 定期检查依赖漏洞
   pnpm audit

   # 更新依赖
   pnpm update
   ```

### 对于贡献者

1. **代码审查**
   - 注意潜在的安全问题
   - 验证所有用户输入
   - 防止注入攻击

2. **敏感信息**
   - 不要提交敏感信息
   - 不要记录敏感数据
   - 使用 .gitignore 排除敏感文件

3. **依赖管理**
   - 只使用可信的依赖
   - 定期更新依赖
   - 审查依赖的安全记录

## 常见安全问题

### 1. XSS (跨站脚本)

**预防措施**:
- Svelte 默认会转义输出
- 避免使用 `{@html}` 除非必要
- 使用 DOMPurify 清理 HTML

```svelte
<!-- ❌ 危险 -->
{@html userInput}

<!-- ✅ 安全 -->
{userInput}
```

### 2. CSRF (跨站请求伪造)

**预防措施**:
- 使用 CSRF Token
- 验证 Origin 和 Referer
- 使用 SameSite Cookie

### 3. 敏感信息泄露

**预防措施**:
```typescript
// ❌ 危险 - 硬编码
const API_KEY = 'sk-xxx...'

// ✅ 安全 - 使用环境变量
const API_KEY = import.meta.env.VITE_API_KEY
```

### 4. 依赖漏洞

**检查和修复**:
```bash
# 检查漏洞
pnpm audit

# 自动修复
pnpm audit fix

# 查看详细信息
pnpm audit --json
```

## 安全更新通知

### 订阅方式

1. **Watch 本仓库**
   - 在 GitHub 上点击 "Watch"
   - 选择 "Releases only" 或 "All Activity"

2. **RSS Feed**
   - 订阅项目的 Releases RSS

3. **邮件列表** (如有)
   - 订阅安全公告邮件列表

### 更新检查

```bash
# 检查新版本
pnpm outdated

# 查看 CHANGELOG
cat CHANGELOG.md

# 查看 Security advisories
# 访问 GitHub Security 标签页
```

## 致谢

我们感谢以下研究人员对项目安全做出的贡献：

<!-- 安全贡献者名单 -->

---

**最后更新**: 2025-12-04

如有任何疑问，请联系项目维护者。
